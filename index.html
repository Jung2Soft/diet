<!doctype html>
<html lang="ko" class="no-js">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>감량 캘린더 · Elite</title>
  <meta name="description" content="6개월 감량 플랜을 전문가급 UI/UX로 체크하는 iOS 친화 PWA.">
  <meta name="theme-color" content="#0b1220" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#f7f8fb" media="(prefers-color-scheme: light)">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="감량 캘린더">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" type="image/png" href="icons/icon-192.png">
  <link rel="stylesheet" href="style.css?v=101">
</head>
<body>
  <a class="skip" href="#calendar">본문으로 건너뛰기</a>

  <header class="appbar blur">
    <div class="brand">
      <span class="logo">✓</span>
      <h1>감량 캘린더</h1>
    </div>
    <div class="actions">
      <button id="installBtn" class="btn ghost small" hidden>홈 추가</button>
      <button id="helpBtn" class="btn ghost small" aria-haspopup="dialog" aria-controls="helpDialog">도움말</button>
    </div>
  </header>

  <main class="container">
    <section class="panel glass" aria-labelledby="configTitle">
      <h2 id="configTitle" class="section-title">플랜 설정</h2>
      <div class="form-grid">
        <div class="field">
          <label for="startDate">시작일</label>
          <input type="date" id="startDate" class="input">
        </div>
        <div class="field">
          <label for="weeks">기간(주)</label>
          <input type="number" id="weeks" class="input" value="24" min="4" max="52">
        </div>
        <div class="field actions-row">
          <button id="applyPlan" class="btn primary">플랜 적용</button>
          <button id="todayBtn" class="btn ghost">오늘</button>
          <button id="exportBtn" class="btn ghost">백업</button>
          <label class="btn ghost file-btn">복원
            <input type="file" id="importFile" accept="application/json" hidden>
          </label>
          <button id="resetBtn" class="btn danger ghost">초기화</button>
        </div>
      </div>
    </section>

    <section class="panel glass" aria-labelledby="statsTitle">
      <h2 id="statsTitle" class="section-title">진행 현황</h2>
      <div class="kpis">
        <div class="kpi">
          <div class="kpi-title">기간</div>
          <div class="kpi-value" id="kpiRange">-</div>
        </div>
        <div class="kpi">
          <div class="kpi-title">성공(✅)</div>
          <div class="kpi-value" id="kpiDone">0</div>
        </div>
        <div class="kpi">
          <div class="kpi-title">실패(❌)</div>
          <div class="kpi-value" id="kpiFail">0</div>
        </div>
        <div class="kpi">
          <div class="kpi-title">성공률</div>
          <div class="kpi-value accent" id="kpiRate">0%</div>
        </div>
      </div>
      <p class="motivation" id="motivationText" aria-live="polite">오늘의 동기부여 ✨</p>
    </section>

    <nav class="month-nav">
      <button id="prevMonth" class="btn icon" aria-label="이전 달">‹</button>
      <h2 id="monthLabel" class="month-title" aria-live="polite">2025년 9월</h2>
      <button id="nextMonth" class="btn icon" aria-label="다음 달">›</button>
    </nav>

    <section class="weekday">
      <div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div class="wknd">토</div><div class="wknd">일</div>
    </section>

    <section class="calendar" id="calendar" aria-label="달력"></section>

    <section class="panel glass guide" aria-labelledby="guideTitle">
      <h2 id="guideTitle" class="section-title">세부 가이드</h2>
      <div id="planDetails"></div>
    </section>
  </main>

  <!-- 상태 선택 바텀시트 -->
  <div id="statusPicker" class="sheet hidden" role="dialog" aria-label="하루 상태 선택">
    <div class="sheet-handle"></div>
    <div class="sheet-actions">
      <button data-status="success" class="chip success">✅ 성공</button>
      <button data-status="partial" class="chip partial">🟨 부분</button>
      <button data-status="fail" class="chip danger">❌ 실패</button>
      <button data-status="clear" class="chip ghost">◻️ 지우기</button>
      <button data-status="note" class="chip ghost">📝 메모</button>
    </div>
  </div>

  <!-- 메모 모달 -->
  <div id="noteModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="noteTitle">
    <div class="modal-card glass">
      <h3 id="noteTitle">메모</h3>
      <textarea id="noteText" class="input area" rows="8" placeholder="예: 1,450kcal / 복싱 60분 / 물 2L"></textarea>
      <div class="modal-actions">
        <button id="saveNote" class="btn primary">저장</button>
        <button id="cancelNote" class="btn ghost">닫기</button>
      </div>
    </div>
  </div>

  <!-- 도움말 모달 -->
  <div id="helpDialog" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
    <div class="modal-card glass">
      <h3 id="helpTitle">사용 방법</h3>
      <ol class="help-list">
        <li>시작일·주 수 설정 → <strong>플랜 적용</strong></li>
        <li>날짜 탭 → 상태(✅/🟨/❌/지우기/메모) 기록</li>
        <li>백업/복원으로 데이터 이동</li>
        <li>사파리 공유 → <strong>홈 화면에 추가</strong> (오프라인 지원)</li>
      </ol>
      <div class="modal-actions">
        <button id="closeHelp" class="btn primary">확인</button>
      </div>
    </div>
  </div>

  <script>document.documentElement.classList.remove('no-js');</script>
  <script src="plan.js?v=101" defer></script>
  <script src="app.js?v=101" defer></script>
</body>
</html>
